<?php//class M_Articles{	public function view($fileName, $vars = array())		{			// Установка переменных для шаблона.			foreach ($vars as $k => $v)			{				$$k = $v;			}			// Генерация HTML в строку.			ob_start();			include $fileName;			return ob_get_clean();			}			// Список всех статей	public function articles_all()	{		global $dbc;		$query = 	"SELECT * 					FROM articles ORDER BY id_article DESC";		$result = mysqli_query($dbc, $query);			if (!$result)			die(mysqli_error($dbc));		// Извлечение из БД.		$n = mysqli_num_rows($result);		$articles = array();		for ($i = 0; $i < $n; $i++)		{			$row = mysqli_fetch_assoc($result);					$articles[] = $row;		}		return $articles;	}		// Конкретная статья	public function articles_get($id_article)	{		global $dbc;		$query = "SELECT title, content FROM articles WHERE id_article = '$id_article'";		$result = mysqli_query($dbc, $query); 		if(!$result)//если нет результата убиваем			die(mysqli_error($dbc));		$article = mysqli_fetch_assoc($result); //ассоциативный массив		return $article;	}	// Добавить статью	public function articles_new($title, $content)	{		// Подготовка.		global $dbc;		$title = trim($title);		$content = trim($content);		// Проверка.		if ($title == '')			return false;		// Запр ос.		$t = "INSERT INTO articles (title, content) VALUES ('$title', '$content')";		$query = sprintf($t, 						 mysqli_real_escape_string($dbc, $title),						 mysqli_real_escape_string($dbc, $content));				$result = mysqli_query($dbc, $query);										if (!$result)			die(mysqli_error($dbc));					return true;	}	// Изменить статью	public function articles_edit($id_article, $title, $content)	{		global $dbc;		$t = "UPDATE articles SET title = '%s', content = '%s' 			WHERE id_article = '$id_article'";		$query = sprintf($t, 						 mysqli_real_escape_string($dbc, $title),						 mysqli_real_escape_string($dbc, $content));		$result = mysqli_query($dbc, $query);		if(!$result) 		{			die (mysqli_error($dbc));		}		return true;	}	// Удалить статью	public function articles_delete($id_article)	{		global $dbc;		$id = mysqli_real_escape_string($dbc, $id_article);				$query = "DELETE FROM articles WHERE id_article = '$id'";				$result = mysqli_query($dbc, $query);						if(!result)			die(mysqli_error($dbc));		return true;	}	// Короткое описание статьи	public function articles_intro($article)	{		if(strlen($article['content']) > 160)			return substr($article['content'], 0, 160);		else			return $article['content'];	}}